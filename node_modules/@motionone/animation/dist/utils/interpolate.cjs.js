'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var utils = require('@motionone/utils');
var easing = require('./easing.cjs.js');

const clampProgress = (p) => Math.min(1, Math.max(p, 0));
function interpolate(output, input = utils.defaultOffset(output.length), easing$1 = utils.noopReturn) {
    const length = output.length;
    /**
     * If the input length is lower than the output we
     * fill the input to match. This currently assumes the input
     * is an animation progress value so is a good candidate for
     * moving outside the function.
     */
    const remainder = length - input.length;
    remainder > 0 && utils.fillOffset(input, remainder);
    return (t) => {
        let i = 0;
        for (; i < length - 2; i++) {
            if (t < input[i + 1])
                break;
        }
        let progressInRange = clampProgress(utils.progress(input[i], input[i + 1], t));
        const segmentEasing = easing.getEasingForSegment(easing$1, i);
        progressInRange = segmentEasing(progressInRange);
        return utils.mix(output[i], output[i + 1], progressInRange);
    };
}

exports.interpolate = interpolate;
